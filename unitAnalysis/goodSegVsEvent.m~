function [avEvCa] = goodSegVsEvent(C,goodSeg, treadBehStruc, eventName, dsRate)


% This computes the event-triggered average for 2p behavior
% dsFactor = temporal downsampling factor of 2p imaging

tCa = treadBehStruc.adjFrTimes; %relFrTimes;
eventTimes = treadBehStruc.(eventName);

eventTimes = eventTimes(eventTimes>=tCa(1) & eventTimes<=tCa(end));

tCa = tCa(1:dsRate:end);



prePostSec = [10 30];

for i = 1:length(goodSeg)
    ca = C(goodSeg(i),:);
    [eventCa, zeroInds] = calcEventTrigCa(ca, tCa, eventTimes, prePostSec);
    avEvCa(:,i) = nanmean(eventCa,2);
end

figure; hold on;
for i=1:length(goodSeg)
   plot(avEvCa(:,i)+i/10); 
    
end




