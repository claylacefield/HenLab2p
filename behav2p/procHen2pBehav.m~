function [treadBehStruc] = procHen2pBehav();

% USAGE: [treadBehStruc] = align2pBehav();
% GUI select TDML behavior and 2p XML files
% to process 2p behavioral data from Jack Bowler's 
% BehaviorMate system


% read behavioral events and times
[treadBehStruc] = readTDML();

% find 2p frame times
[relFrTimes, absFrTimes, frInds] = get2pFrTimes();
treadBehStruc.relFrTimes = relFrTimes;
treadBehStruc.absFrTimes = absFrTimes;
treadBehStruc.frInds = frInds;

% take into account offset between behavior start time and 2p trigger ON
adjFrTimes = relFrTimes + treadBehStruc.syncOnTime;
treadBehStruc.adjFrTimes = adjFrTimes;

% calculate velocity over each frame (at 30hz)
y = treadBehStruc.y;
yTimes = treadBehStruc.yTimes;

frEpochInds = find(yTime>=adjFrTimes(1) & yTime<=adjFrTimes(end));
y2 = y(frEpochInds);
yTimes2 = yTimes(frEpochInds);

resampY = interp1(yTime, y, 0:0.033:900);
vel = abs(diff(resampY));


% save relevant variables to output structure
treadBehStruc.y = y;
treadBehStruc.yTime = yTime;
% treadBehStruc.resampY = resampY;
% treadBehStruc.vel = vel;